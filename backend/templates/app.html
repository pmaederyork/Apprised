<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Apprised Chat</title>
    <link rel="icon" type="image/png" href="/static/icons/apprised.png">
    
    <!-- CSS Files -->
    <link rel="stylesheet" href="/static/css/variables.css">
    <link rel="stylesheet" href="/static/css/main.css">
    <link rel="stylesheet" href="/static/css/sidebar.css">
    <link rel="stylesheet" href="/static/css/chat.css">
    <link rel="stylesheet" href="/static/css/editor.css">
    <link rel="stylesheet" href="/static/css/editor-changes.css">
    <link rel="stylesheet" href="/static/css/components.css">
    <link rel="stylesheet" href="/static/css/buttons.css">
    <link rel="stylesheet" href="/static/css/auth.css">
    <link rel="stylesheet" href="/static/css/prompt-generator.css">

    <!-- Google API for Picker -->
    <script src="https://apis.google.com/js/api.js" async defer></script>
</head>
<body>
    <!-- API Key Setup Screen -->
    <div id="apiKeySetup" style="display: none;">
        <div class="api-key-container">
            <h2>Welcome, <span id="setupUserName"></span>!</h2>
            <p class="subtitle">One last step to get started</p>

            <label for="setupApiKeyInput">Your Anthropic API Key</label>
            <input
                type="password"
                id="setupApiKeyInput"
                placeholder="sk-ant-api03-..."
                autocomplete="off"
            />

            <div class="api-key-help">
                Don't have an API key? <a href="https://console.anthropic.com/" target="_blank">Get one here</a>
            </div>

            <div class="api-key-error" id="apiKeyError"></div>

            <button class="save-api-key-btn" id="saveApiKeyBtn" onclick="saveApiKey()">
                Save & Continue
            </button>
        </div>
    </div>

    <div class="app-container">
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <img id="appLogo" class="app-logo" src="/static/icons/apprised.png" alt="Apprised" />
            </div>
            <div class="sidebar-content" id="sidebarContent">
                <div class="system-prompt-section">
                    <div class="section-header" id="systemPromptHeader">
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <span class="collapse-icon" id="systemPromptCollapse">‚ñº</span>
                            <span class="section-title" style="margin: 0;">AGENTS</span>
                        </div>
                        <button class="add-prompt-btn" id="addPromptBtn" title="Add new system prompt">+</button>
                    </div>
                    <div class="system-prompt-list" id="systemPromptList">
                        <!-- System prompt items will be populated by JavaScript -->
                    </div>
                </div>
                <div class="conversations-section">
                    <div class="section-header" id="conversationsHeader">
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <span class="collapse-icon" id="conversationsCollapse">‚ñº</span>
                            <span class="section-title" style="margin: 0;">CONVERSATIONS</span>
                        </div>
                        <button class="new-chat-btn" id="newChatBtn" title="Start new chat">+</button>
                    </div>
                    <div class="conversations-list" id="chatList">
                        <!-- Chat items will be populated by JavaScript -->
                    </div>
                </div>
                
                <div class="documents-section">
                    <div class="section-header" id="documentsHeader">
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <span class="collapse-icon" id="documentsCollapse">‚ñº</span>
                            <span class="section-title" style="margin: 0;">DOCUMENTS</span>
                        </div>
                        <div style="display: flex; gap: 4px;">
                            <button class="import-drive-btn" id="importFromDriveBtn" title="Import from Google Drive">
                                <img src="/static/assets/gdrive_icon.webp" alt="Google Drive" style="width: 16px; height: 16px;">
                            </button>
                            <button class="add-document-btn" id="addDocumentBtn" title="Add new document">+</button>
                        </div>
                    </div>
                    <div class="documents-list" id="documentsList">
                        <!-- Document items will be populated by JavaScript -->
                    </div>
                </div>
                
                <div class="tools-section">
                    <div class="section-title">TOOLS</div>
                    <div class="tool-item">
                        <div class="tool-content">
                            <span class="tool-name">Web Search</span>
                            <label class="toggle-switch">
                                <input type="checkbox" id="webSearchToggle">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                    </div>
                    <div class="tool-item">
                        <div class="tool-content">
                            <span class="tool-name">Screenshare</span>
                            <label class="toggle-switch">
                                <input type="checkbox" id="screenshareToggle">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="sidebar-footer">
                <div class="user-profile" id="userProfile" style="display: none;">
                    <img id="userAvatarFooter" class="user-avatar" src="" alt="User">
                    <div class="user-info">
                        <span class="user-name" id="userNameFooter"></span>
                    </div>
                </div>

                <!-- User Menu Dropdown -->
                <div class="user-menu-dropdown" id="userMenuDropdown" style="display: none;">
                    <div class="user-menu-item" id="menuSettings">
                        <svg class="menu-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="3"/>
                            <path d="M12 1v6m0 6v6m0-6h6m-6 0H6m6-6a9 9 0 0 1 0 18 9 9 0 0 1 0-18z"/>
                        </svg>
                        <span>Settings</span>
                    </div>
                    <div class="user-menu-item" id="menuLogout">
                        <svg class="menu-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
                            <polyline points="16 17 21 12 16 7"/>
                            <line x1="21" y1="12" x2="9" y2="12"/>
                        </svg>
                        <span>Log out</span>
                    </div>
                </div>
            </div>
            <div class="sidebar-resize-handle" id="sidebarResizeHandle"></div>
        </div>
        
        <div class="chat-container" id="chatContainer">
            <div class="chat-header">
                <input type="text" class="chat-title" id="chatTitle" value="New Chat" />

                <div class="chat-header-actions">
                    <div class="agent-controls">
                        <div class="agent-selector" id="agentSelector">
                            <span class="agent-selector-text">No Agents</span>
                        </div>
                        <button class="add-agent-btn" id="addAgentBtn" title="Add Agent">+</button>
                    </div>
                    <div class="turns-control">
                        <label for="turnsSelector" class="turns-label">Turns:</label>
                        <select id="turnsSelector" class="turns-selector">
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6</option>
                            <option value="7">7</option>
                            <option value="8">8</option>
                            <option value="9">9</option>
                            <option value="10">10</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="chat-messages" id="chatMessages">
                <div class="message claude">
                    <div class="message-bubble">
                        Hello! I'm Claude. Ask me anything and I'll do my best to help you.
                    </div>
                </div>
            </div>
            <div class="loading" id="loading">
                <span class="loading-dots">Claude is thinking...</span>
            </div>
            <div class="file-preview-area" id="filePreviewArea" style="display: none;">
                <!-- File thumbnails will be populated here -->
            </div>
            <div class="screenshare-preview-container" id="screensharePreviewContainer" style="display: none;">
                <div class="screenshare-preview-item">
                    <img class="screenshare-preview-image" id="screensharePreviewImage" alt="Live Screenshot">
                    <span class="screenshare-preview-label">Live Screenshot</span>
                </div>
            </div>
            <div class="chat-input-container">
                <textarea id="messageInput" placeholder="Reply to Claude..." rows="1"></textarea>
                <input type="file" id="fileInput" multiple style="display: none;" />
                <span id="docContextIndicator" class="doc-context-indicator" title="Document context active">‚úì</span>
                <button id="fileBtn" title="Attach files">üìé</button>
                <button id="sendBtn">‚Üó</button>
            </div>
            <div class="input-hint" style="font-size: 11px; color: #6b7280; text-align: center; margin-top: 4px;">
                Press Ctrl+C to interrupt streaming response
            </div>
        </div>
        
        <div class="system-prompt-editor" id="systemPromptEditor">
            <div class="editor-header">
                <input type="text" class="editor-title" id="editorTitle" placeholder="System Prompt Name" />
                <div class="editor-actions">
                    <button class="editor-btn" id="exitEditorBtn">Back to Chat</button>
                </div>
            </div>
            <div class="editor-content">
                <!-- Prompt Generator Bar -->
                <div class="prompt-generator-bar" id="promptGeneratorBar">
                    <div class="generator-header" id="generatorHeader">
                        <span class="collapse-icon" id="generatorCollapse">‚ñº</span>
                        <span class="generator-title">GENERATE SYSTEM PROMPT</span>
                    </div>
                    <div class="generator-content" id="generatorContent">
                        <div class="generator-top-row">
                            <label for="promptDescriptionInput" class="generator-label">
                                Describe what you want this agent to do:
                            </label>
                            <div class="generator-actions">
                                <button id="generatePromptBtn" class="generate-btn">
                                    ‚ú® Generate
                                </button>
                                <button id="clearDescriptionBtn" class="clear-description-btn">
                                    Clear
                                </button>
                            </div>
                        </div>
                        <textarea
                            id="promptDescriptionInput"
                            class="prompt-description-input"
                            placeholder='e.g., "A Python expert that helps debug code and explain best practices"'
                            rows="2"
                        ></textarea>
                        <div id="generatorStatus" class="generator-status" style="display: none;"></div>
                    </div>
                </div>

                <textarea class="system-prompt-textarea" id="systemPromptTextarea" placeholder="Enter your system prompt here..."></textarea>
            </div>
        </div>

        <div class="document-editor" id="documentEditor">
            <div class="editor-header">
                <input type="text" class="editor-title" id="documentTitle" placeholder="Document Name" />
                <span id="driveSyncIndicator" class="drive-sync-indicator" style="display: none; margin-left: 8px;"></span>
                <div class="editor-actions">
                    <a id="openInDriveBtn" class="open-in-drive-btn" href="#" target="_blank" style="display: none; margin-right: 8px;" title="Open in Google Drive">
                        <img src="/static/assets/gdrive_icon.webp" alt="Open in Drive" style="width: 28px; height: 28px;">
                    </a>
                    <button class="editor-btn" id="saveToDriveBtn" style="background: #4285F4; color: white; border: none;" title="Save to Google Drive">Save</button>
                    <button class="editor-btn" id="documentSyncBtn" style="background: #0F9D58; color: white; border: none;">Pull</button>
                    <button class="editor-btn" id="closeDocumentBtn" style="background: #6b7280; color: white; border: none;">Close</button>
                </div>
            </div>
            <div class="markdown-toolbar" id="markdownToolbar">
                <button class="markdown-btn" id="undoBtn" title="Undo (Ctrl+Z)" data-format="undo">‚Ü∂</button>
                <button class="markdown-btn" id="redoBtn" title="Redo (Ctrl+Y)" data-format="redo">‚Ü∑</button>
                <button class="markdown-btn" id="boldBtn" title="Bold (Ctrl+B)" data-format="bold">B</button>
                <button class="markdown-btn" id="italicBtn" title="Italic (Ctrl+I)" data-format="italic">I</button>
                <button class="markdown-btn" id="underlineBtn" title="Underline (Ctrl+U)" data-format="underline">U</button>
                <button class="markdown-btn" id="listBtn" title="Unordered List (Ctrl+L)" data-format="list">‚Ä¢</button>
                <button class="markdown-btn" id="orderedListBtn" title="Ordered List (Ctrl+Shift+L)" data-format="orderedList">#</button>
                <button class="markdown-btn" id="strikeBtn" title="Strikethrough (Ctrl+Shift+X)" data-format="strike">S</button>
                <span class="toolbar-separator"></span>
                <button class="markdown-btn" id="indentBtn" title="Increase Indent (Ctrl+])">‚Üí</button>
                <button class="markdown-btn" id="outdentBtn" title="Decrease Indent (Ctrl+[)">‚Üê</button>
                <span class="toolbar-separator"></span>
                <select class="font-size-select" id="fontSizeSelect" title="Font Size">
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10">10</option>
                    <option value="11">11</option>
                    <option value="12">12</option>
                    <option value="14">14</option>
                    <option value="16">16</option>
                    <option value="18">18</option>
                    <option value="20">20</option>
                    <option value="24">24</option>
                    <option value="28">28</option>
                    <option value="32">32</option>
                    <option value="36">36</option>
                    <option value="48">48</option>
                    <option value="60">60</option>
                    <option value="72">72</option>
                </select>
                <span class="toolbar-separator"></span>
                <select class="font-family-select" id="fontFamilySelect" title="Font Family">
                    <option value="Arial">Arial</option>
                    <option value="Times New Roman">Times New Roman</option>
                    <option value="Georgia">Georgia</option>
                    <option value="Courier New">Courier New</option>
                    <option value="Verdana">Verdana</option>
                </select>
                <span class="toolbar-separator"></span>
                <!-- Format Dropdown -->
                <select id="formatSelect" class="format-dropdown" title="Text Format">
                    <option value="p">P</option>
                    <option value="h1">H1</option>
                    <option value="h2">H2</option>
                    <option value="h3">H3</option>
                </select>
                <span class="toolbar-separator"></span>
                <select class="text-align-select" id="textAlignSelect" title="Text Alignment">
                    <option value="">Align</option>
                    <option value="left">‚¨Ö Left</option>
                    <option value="center">‚¨å Center</option>
                    <option value="right">‚û° Right</option>
                    <option value="justify">‚â° Justify</option>
                </select>
                <span class="toolbar-separator"></span>
                <div class="spacing-dropdown">
                    <button class="toolbar-btn spacing-dropdown-btn" id="spacingDropdownBtn" title="Line & Paragraph Spacing">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                            <path d="M2 2h12v1H2V2zm0 6h12v1H2V8zm0 6h12v1H2v-1z"/>
                        </svg>
                    </button>
                    <div class="spacing-dropdown-menu" id="spacingDropdownMenu" style="display: none;">
                        <div class="spacing-menu-item" data-action="line-spacing" data-value="1">
                            <span class="checkmark">‚úì</span>
                            <span>Single</span>
                        </div>
                        <div class="spacing-menu-item" data-action="line-spacing" data-value="1.15">
                            <span class="checkmark">‚úì</span>
                            <span>1.15</span>
                        </div>
                        <div class="spacing-menu-item" data-action="line-spacing" data-value="1.5">
                            <span class="checkmark">‚úì</span>
                            <span>1.5</span>
                        </div>
                        <div class="spacing-menu-item" data-action="line-spacing" data-value="2">
                            <span class="checkmark">‚úì</span>
                            <span>Double</span>
                        </div>
                        <div class="spacing-menu-separator"></div>
                        <div class="spacing-menu-item" data-action="space-before">
                            <span class="checkmark">‚úì</span>
                            <span>Add space before paragraph</span>
                        </div>
                        <div class="spacing-menu-item" data-action="space-after">
                            <span class="checkmark">‚úì</span>
                            <span>Add space after paragraph</span>
                        </div>
                    </div>
                </div>

            </div>
            <div class="editor-content">
                <div class="document-textarea" id="documentTextarea" data-placeholder="Start writing..."></div>
            </div>
        </div>

        <!-- Claude Change Review Panel -->
        <div id="documentChangeReview" class="change-review-panel" style="display: none;" tabindex="-1">
            <!-- Header -->
            <div class="review-header">
                <h3>Review Claude's Changes</h3>
            </div>

            <!-- Navigation Controls -->
            <div class="review-controls">
                <button id="prevChangeBtn">‚Üê Previous</button>
                <button id="nextChangeBtn">Next ‚Üí</button>
                <span class="change-position" id="changePosition">Change 1 of 1</span>
            </div>

            <!-- Action Buttons -->
            <div class="review-actions">
                <button id="acceptChangeBtn" class="accept-btn">‚úì Accept</button>
                <button id="rejectChangeBtn" class="reject-btn">‚úó Reject</button>
                <button id="acceptAllBtn" class="accept-all-btn">Accept All</button>
                <button id="rejectAllBtn" class="reject-all-btn">Reject All</button>
            </div>

            <!-- Current Change Detail -->
            <div class="current-change-detail">
                <div class="change-type-indicator" id="changeTypeIndicator">MODIFY</div>
                <div class="change-content-preview" id="changeContentPreview"></div>
            </div>

            <!-- Keyboard Shortcuts Help -->
            <div class="review-shortcuts-help">
                <h4>Keyboard Shortcuts</h4>
                <ul>
                    <li><kbd>‚Üí</kbd> Next change</li>
                    <li><kbd>‚Üê</kbd> Previous change</li>
                    <li><kbd>Enter</kbd> Accept change</li>
                    <li><kbd>Delete</kbd> Reject change</li>
                    <li><kbd>Ctrl+A</kbd> Accept all</li>
                    <li><kbd>Ctrl+R</kbd> Reject all</li>
                    <li><kbd>Esc</kbd> Cancel review</li>
                </ul>
            </div>
        </div>

        <!-- Settings Modal -->
        <div class="settings-modal" id="settingsModal" style="display: none;">
            <div class="settings-modal-content">
                <div class="settings-header">
                    <h3>Settings</h3>
                    <button class="close-settings-btn" id="closeSettingsBtn">√ó</button>
                </div>
                <div class="settings-body">
                    <!-- API Configuration Section -->
                    <div class="settings-section api-settings-section">
                        <h4 class="settings-section-title">API Configuration</h4>
                        <div class="settings-section-content">
                            <label for="apiKeyInput">Anthropic API Key:</label>
                            <div class="api-key-input-container">
                                <input type="password" id="apiKeyInput" placeholder="sk-ant-api03-..." />
                                <button class="show-hide-btn" id="showHideBtn" title="Show/Hide API Key">üëÅÔ∏è</button>
                            </div>
                            <div class="api-key-status" id="apiKeyStatus"></div>
                            <div class="api-key-actions">
                                <button class="save-api-key-btn" id="saveApiKeyBtnModal">Save API Key</button>
                                <button class="delete-api-key-btn" id="deleteApiKeyBtn">Delete API Key</button>
                            </div>
                        </div>
                    </div>

                    <!-- Google Drive Integration Section -->
                    <div class="settings-section gdrive-settings-section">
                        <h4 class="settings-section-title">Google Drive Integration</h4>
                        <div class="settings-section-content">
                            <div id="gdriveStatusContainer" class="gdrive-status-container">
                                <span id="gdriveStatusIcon" class="gdrive-status-icon">‚òÅÔ∏è</span>
                                <span id="gdriveStatusText" class="gdrive-status-text">Not connected</span>
                            </div>
                            <div class="gdrive-actions">
                                <button id="gdriveConnectBtn" class="gdrive-connect-btn">Enable Drive Access</button>
                            </div>
                            <div class="gdrive-help-text">
                                Connect Google Drive to save and import documents directly from your Drive.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Help Modal -->
        <div class="settings-modal" id="helpModal" style="display: none;">
            <div class="settings-modal-content">
                <div class="settings-header">
                    <h3>Apprised Chat - Help & Shortcuts</h3>
                    <button class="close-settings-btn" id="closeHelpBtn">√ó</button>
                </div>
                <div class="settings-body">
                    <!-- App Features Section - MOVED TO TOP -->
                    <div class="settings-section">
                        <h4 class="settings-section-title">‚ú® Key Features</h4>
                        <div class="settings-section-content">
                            <ul class="feature-list">
                                <li><strong>Agent Document Editor:</strong> Ask agents to reformat, add, remove, and generate text</li>
                                <li><strong>Review Edits:</strong> Preview, accept or reject inline edits made by agents</li>
                                <li><strong>Multi-Agent System:</strong> Create custom agents with specialized system prompts</li>
                                <li><strong>Multi-Turn Reasoning:</strong> Configure 1-10 reasoning turns for complex tasks</li>
                                <li><strong>Web Search:</strong> Enable Claude to search the web for current information</li>
                                <li><strong>File Upload:</strong> Attach images and documents to your messages</li>
                                <li><strong>Screenshare:</strong> Capture and share screenshots with Claude</li>
                            </ul>
                        </div>
                    </div>

                    <!-- Chat Shortcuts Section -->
                    <div class="settings-section">
                        <h4 class="settings-section-title">üí¨ Chat Shortcuts</h4>
                        <div class="settings-section-content">
                            <div class="shortcut-grid">
                                <div class="shortcut-item">
                                    <span class="shortcut-key">Enter</span>
                                    <span class="shortcut-description">Send message</span>
                                </div>
                                <div class="shortcut-item">
                                    <span class="shortcut-key">Shift + Enter</span>
                                    <span class="shortcut-description">New line in message</span>
                                </div>
                                <div class="shortcut-item">
                                    <span class="shortcut-key">Tab</span>
                                    <span class="shortcut-description">Copy latest Claude message to document</span>
                                </div>
                                <div class="shortcut-item">
                                    <span class="shortcut-key">‚Üë</span>
                                    <span class="shortcut-description">Copy last user message to input</span>
                                </div>
                                <div class="shortcut-item">
                                    <span class="shortcut-key">Escape</span>
                                    <span class="shortcut-description">Clear chat input</span>
                                </div>
                                <div class="shortcut-item">
                                    <span class="shortcut-key">Ctrl + C</span>
                                    <span class="shortcut-description">Interrupt streaming response</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Document Editor Shortcuts Section -->
                    <div class="settings-section">
                        <h4 class="settings-section-title">üìù Document Editor Shortcuts</h4>
                        <div class="settings-section-content">
                            <div class="shortcut-grid">
                                <div class="shortcut-item">
                                    <span class="shortcut-key">Ctrl/Cmd + B</span>
                                    <span class="shortcut-description">Bold text</span>
                                </div>
                                <div class="shortcut-item">
                                    <span class="shortcut-key">Ctrl/Cmd + I</span>
                                    <span class="shortcut-description">Italic text</span>
                                </div>
                                <div class="shortcut-item">
                                    <span class="shortcut-key">Ctrl/Cmd + U</span>
                                    <span class="shortcut-description">Underline text</span>
                                </div>
                                <div class="shortcut-item">
                                    <span class="shortcut-key">Ctrl/Cmd + L</span>
                                    <span class="shortcut-description">Unordered list</span>
                                </div>
                                <div class="shortcut-item">
                                    <span class="shortcut-key">Ctrl + Shift + L</span>
                                    <span class="shortcut-description">Ordered list</span>
                                </div>
                                <div class="shortcut-item">
                                    <span class="shortcut-key">Ctrl + Shift + X</span>
                                    <span class="shortcut-description">Strikethrough</span>
                                </div>
                                <div class="shortcut-item">
                                    <span class="shortcut-key">Ctrl/Cmd + Z</span>
                                    <span class="shortcut-description">Undo</span>
                                </div>
                                <div class="shortcut-item">
                                    <span class="shortcut-key">Ctrl/Cmd + Y</span>
                                    <span class="shortcut-description">Redo</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Change Review Shortcuts Section -->
                    <div class="settings-section">
                        <h4 class="settings-section-title">üîç AI Change Review Shortcuts</h4>
                        <div class="settings-section-content">
                            <div class="shortcut-grid">
                                <div class="shortcut-item">
                                    <span class="shortcut-key">‚Üê / ‚Üí</span>
                                    <span class="shortcut-description">Navigate changes</span>
                                </div>
                                <div class="shortcut-item">
                                    <span class="shortcut-key">Enter / Y</span>
                                    <span class="shortcut-description">Accept current change</span>
                                </div>
                                <div class="shortcut-item">
                                    <span class="shortcut-key">Delete / N</span>
                                    <span class="shortcut-description">Reject current change</span>
                                </div>
                                <div class="shortcut-item">
                                    <span class="shortcut-key">Ctrl/Cmd + A</span>
                                    <span class="shortcut-description">Accept all changes</span>
                                </div>
                                <div class="shortcut-item">
                                    <span class="shortcut-key">Ctrl/Cmd + R</span>
                                    <span class="shortcut-description">Reject all changes</span>
                                </div>
                                <div class="shortcut-item">
                                    <span class="shortcut-key">Escape</span>
                                    <span class="shortcut-description">Cancel review and revert</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Global Shortcuts Section -->
                    <div class="settings-section">
                        <h4 class="settings-section-title">‚ö° Global Shortcuts</h4>
                        <div class="settings-section-content">
                            <div class="shortcut-grid">
                                <div class="shortcut-item">
                                    <span class="shortcut-key">Ctrl/Cmd + N</span>
                                    <span class="shortcut-description">New chat</span>
                                </div>
                                <div class="shortcut-item">
                                    <span class="shortcut-key">Escape</span>
                                    <span class="shortcut-description">Close modals/editors</span>
                                </div>
                                <div class="shortcut-item">
                                    <span class="shortcut-key">Enter</span>
                                    <span class="shortcut-description">Save inline edit</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- API Key Required Notification -->
        <div class="api-key-notification" id="apiKeyNotification" style="display: none;">
            <div class="notification-content">
                <h3>API Key Required</h3>
                <p>Please add your Anthropic API key in Settings before using the chat.</p>
                <button class="open-settings-btn" id="openSettingsFromNotification">Open Settings</button>
            </div>
        </div>

    </div>

    <!-- JavaScript Modules -->
    <script src="/static/js/auth.js"></script>
    <script src="/static/js/storage.js"></script>
    <script src="/static/js/api.js"></script>
    <script src="/static/js/components.js"></script>
    <script src="/static/js/ui.js"></script>
    <script src="/static/js/chat.js"></script>
    <script src="/static/js/systemPrompts.js"></script>
    <script src="/static/js/promptGenerator.js"></script>
    <script src="/static/js/agents.js"></script>
    <script src="/static/js/purify.min.js"></script>
    <script src="/static/js/squire-raw.js"></script>
    <script src="/static/js/documents.js"></script>
    <script src="/static/js/claude-changes.js"></script>
    <script src="/static/js/tools.js"></script>
    <script src="/static/js/screenshare.js"></script>
    <script src="/static/js/files.js"></script>
    <script src="/static/js/gdrive.js"></script>
    <script src="/static/js/settings.js"></script>
    <script src="/static/js/help.js"></script>
    <script src="/static/js/app.js"></script>
</body>
</html>